if(window.RepStar===undefined){window.RepStar={};}
window.RepStar.Score=function(entityId,scores){this.entityId=entityId;this.scores=scores;};window.RepStar.Score.prototype={ScoreBar:{PixelLength:417,Max:1000},ScoreScale:{POOR:10,FAIR:30,AVERAGE:70,GOOD:90,EXCELLENT:100},init:function(){var that=this;this.bindEventHandlers();if(this.scores===null){return;}
jQuery('.metric').each(function(e){var $this=jQuery(this),$value=$this.find('.bar .value'),value=0;if($this.hasClass('overall_score')){value=that.scores.averageRatingScore;}else if($this.hasClass('visibility')){value=that.scores.recentnessScore;}else if($this.hasClass('timeliness')){value=that.scores.timeScore;}else if($this.hasClass('length')){value=that.scores.lengthScore;}else if($this.hasClass('reviewer')){value=that.scores.reviewerScore;}else if($this.hasClass('industry')){value=that.scores.industryScore;}
if(value===null){$value.addClass('na');$value.html('N/A');}else{if(value<that.ScoreScale.POOR){$value.addClass('poor');}else if(value>=that.ScoreScale.POOR&&value<that.ScoreScale.FAIR){$value.addClass('fair');}else if(value>=that.ScoreScale.FAIR&&value<that.ScoreScale.AVERAGE){$value.addClass('average');}else if(value>=that.ScoreScale.AVERAGE&&value<that.ScoreScale.GOOD){$value.addClass('good');}else if(value>=that.ScoreScale.GOOD){$value.addClass('excellent');}
$value.css('height',value+'%');if(value===100){$value.addClass('full');}}});var score=that.scores.overallScore,scorePosition=((score*that.ScoreBar.PixelLength)/that.ScoreBar.Max)-25,$score=jQuery('.score_bar .score');$score.html(score);$score.css({'left':scorePosition+'px','visibility':'visible'});},bindEventHandlers:function(){var that=this;jQuery('.metric .bar').mouseover(function(e){/*that.showValue(this);*/});jQuery('.metric .bar').mouseout(function(e){that.hideValue();});jQuery('.metric .button').mouseover(function(e){that.showHelp(this);});jQuery('.metric .button').mouseout(function(e){that.hideHelp();});},showValue:function(bar){var $bar=jQuery(bar),value=parseInt($bar.find('.value').css('height'),10),$metricValue=jQuery('.metric_value');$metricValue.addClass('show');$metricValue.empty();$metricValue.html(value+'%');var height=$metricValue.outerHeight(),width=$metricValue.outerWidth(),barPos=$bar.position();$metricValue.css({top:barPos.top-height+10,left:barPos.left-width/4});},hideValue:function(){jQuery('.metric_value').removeClass('show');},showHelp:function(button){var $button=jQuery(button),$help=$button.closest('.metric').find('.help'),$metricHelp=jQuery('.metric_help'),$metricHelpContent=$metricHelp.find('.metric_help_content');$metricHelp.addClass('show');$metricHelpContent.empty();$metricHelpContent.html($help.text());var height=$metricHelp.outerHeight(),width=$metricHelp.outerWidth(),buttonPos=$button.position();$metricHelp.css({top:buttonPos.top-height-10,left:buttonPos.left-width/4});},hideHelp:function(){jQuery('.metric_help').removeClass('show');}};